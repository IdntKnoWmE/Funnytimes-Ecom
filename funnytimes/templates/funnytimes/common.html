<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    >
  
    
    <!-- Bootstrap Icon link -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

    <!-- Fontawesome link -->
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />

    <title>{% block title %} {% endblock %}</title>
    {% load static %}
  </head>

  <!-- Custom CSS -->
  <style>
    html{
      height: 100%;
    }
    .bg-nav{
      background: url( {% static 'funnytimes\bg.jpg' %}) ;
      background-size: cover ;
    }
    .img-logo{
      width :50px;
      height: 50px;
    }
    .search
    {
      width:800px;
    }
    a{
      font-size: medium;
    }

    .nav-txt :hover{
      font-size: larger;
    }

    
    body{
          background-color: rgb(204, 238, 238);
          background-size: cover;
          background-position: center center;
          background-repeat: no-repeat;
          width: 100%;
          min-height : 100%;
          display : flex;
          flex-direction : column;
    }


    .foot{
      background: url({% static 'funnytimes\land.jpg' %});
      background-size: cover ;
      text-align: center;
      margin: 0px;
      height: 30px;
      margin-top: auto;
    }

    .img-modal{
      background: url( {% static 'funnytimes\welcomeloginn.jpg' %}) ;
        background-size: cover ;
    } 
    @media (max-width :930px){
      .search{
        width:85%
      }
    }
    
      
    @media (max-width : 992px){
      .img-modal{
        display: none;
      }
      .form-modal{
        width :100%;
      }
      .modal-cont{
        background: url( {% static 'funnytimes\welcomeloginn.jpg' %}) ;
        background-size: cover ;
        color : white;
      }
    }

  
  </style>
  {% block css %} {% endblock %}
  <body>
    

    <!-- Navigation bar -->
    <nav class="navbar sticky-top navbar-expand-xxl  navbar-light bg-nav">
        <a class="navbar-brand nav-txt mx-2" href="/funnytimes/"><img src="{% static 'funnytimes/logo.png' %}" class="img-logo">
          <i class="text text-decoration-underline fw-bold text-warning ">FunnyTimes</i></a>
        <button class="navbar-toggler text-warning" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span>
            <i class="bi bi-justify"></i>
          </span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item ms-2">
              <a class="nav-link active text-warning nav-txt" href="/funnytimes/about"><i class="text text-decoration-underline  text-warning">About Us</i></a>
            </li>
            <li class="nav-item ms-2">
              <a class="nav-link text-warning nav-txt" href="/funnytimes/contact"><i class="text text-decoration-underline  text-warning">Contact</i></a>
            </li>
            <li class="nav-item ms-2">
              <a
                class="nav-link text-warning nav-txt"
                href="/funnytimes/tracker"
              ><i class="fas fa-location" style="font-weight: 800;" id="popcart-track" data-bs-toggle="popover" title="Track your Order" data-bs-trigger="hover" data-bs-container="body" data-bs-html="true" data-bs-placement="bottom"
              ></i></a>
            </li>
          </ul>
          <ul class="navbar-nav ms-1 me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <form class="d-flex" action="search">
                <input
                 class="search"
                  type="search"
                  placeholder="Search"
                  aria-label="Search"

                />
                <button class="btn btn-success ms-2" type="submit">
                Search
                </button>
              </form>
            </li>
          </ul>
          
          <ul class="navbar-nav ms-2 mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link active text-warning nav-txt"
                data-bs-toggle="modal" href="#login">
                <i class='text text-decoration-underline text-warning'>
                Login
                </i>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link active text-warning" 
                href="/funnytimes/checkout"
              ><i class='text text-decoration-underline text-warning' id="popcart" data-bs-toggle="popover" title="MyCart" data-bs-trigger="hover" data-bs-container="body" data-bs-html="true" data-bs-placement="bottom"
              >Checkout</i><i class="bi bi-cart-check fa-lg icon"><sup id="cart">0</sup></i></a>
            </li>
          </ul>
    </nav>
    
    {% include 'funnytimes/login.html' %}

    <!-- Navigation bar end -->
    <div class="page" style="margin-top: 10px;">
    
    {% block body %} {% endblock %} 
    </div

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous">
      </script>
  
      <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"
      ></script>

      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"
      ></script>
  </body>
  
    <!-- Footer starts here -->

    <footer class="foot">
        <p><i class="fas fa-copyright"></i>Copyright 2022</p>
      </footer>


    <!-- Footer ends here -->

    {% block js %}{% endblock %}
    <script>
      if(localStorage.getItem('cart') == null){
        var cart = {};
      }
      else{
        cart = JSON.parse(localStorage.getItem('cart'));
        document.getElementById('cart').innerHTML = cart.total_item;
      }
      update_popcart(cart);

      function update_popcart(cart){
        //console.log("lo",cart);
        var i = 1;
        if(cart.total_item == undefined){
          var popv = "You have 0" + "  Items in your cart" + "<br>" + "Add some items to checkout."

        }
        else{
        var popv = "You have " + cart.total_item + "  Items in your cart" + "<br>" + "Click here to checkout."+"<br>"
        
        
        }
        document.getElementById('popcart').setAttribute('data-bs-content', popv);
        var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl);
      });


          
      };
      
      $("#exampleModal").modal("show");
      
      </script>
  </html>
